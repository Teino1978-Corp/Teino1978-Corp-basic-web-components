<!--
Aspect for treating an array of data as list items.
-->

<link rel="import" href="../basic-aspect/basic-aspect.html">
<link rel="import" href="../basic-stack/basic-stack.html">

<dom-module id="basic-spread-new">
  <style>
  :host {
    display: inline-block;
    overflow: hidden;
    position: relative;
  }

  basic-stack {
    display: inline-block;
  }

  #stack ::content > * {
    transform: translate(-50%, -50%);
  }
  </style>
  <template>
    <basic-stack id="stack">
      <content></content>
    </basic-stack>
  </template>
</dom-module>

<script>
Polymer(mixin(BasicAspectMixin, {

  hostAttributes: {
    target: 'shadow'
  },

  is: 'basic-spread-new',

  ready: function() {
    this.$.stack.addEventListener('basic-layout', function(event) {
      this._layout(event.detail.width, event.detail.height);
    }.bind(this));
  },

  recalc: function() {
    this.$.stack.recalc();
  },

  _layout: function(width, height) {
    var count = this.content.length;
    this.style.width = (count * width) + 'px';
    this.style.height = height + 'px';
    this.content.forEach(function(element, index) {
      var offset = (index + 0.5) * width;
      element.style.left = offset + 'px';
      element.style.top = '50%';
    });
  }

}));
</script>
